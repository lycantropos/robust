dist: xenial

language: python

matrix:
  include:
    - python: pypy3.5-6.0.0
    - python: pypy3.6-7.0.0
    - python: 3.5
    - python: 3.6
    - python: 3.7
    - python: 3.8

install:
  - python -m pip install --upgrade pip setuptools
  - python -m pip install --upgrade codecov
  - python -m pip install --force-reinstall -r requirements.txt
  - python -m pip install --force-reinstall -r requirements-tests.txt

script:
  - pytest
  - python -m doctest README.md

after_success:
  - python -m codecov -f coverage.xml -X gcov

deploy:
  provider: pypi
  on:
    branch: master
    python: 3.5
  user: __token__
  password:
    secure: bdstmtNqZSvepG5UQLjhTfT4yWZhNS8+RU1ifbqNtvBPwwkxOJIl/VmQJhTrhYxeNCj6vSSoKoMDR9WMQfF+ZqqXtq1HseOe7z6KTD9/2Ksd1AC7GR6OhL6ywBgjSMXFka05itBDf+gF0M0CdaEoXA6Vueu5CvJLEVMPgGvQKsA+vYE8DsBrhTgVVOpbj9/SlK0f+8ti4S07f0G7q9dOHzT2onV2xrgXPGh5b9g4VRnQUmw7FPQ7ueWqkdKGznBV/wv9mrw/MglJRMs1BUWz4AitnjAoZEyKahfppm7PBWdkNv2xUa20i1ItRkfIgQ7mCs8LZPpkhvjCTVrHuMCKhaLA1cs3Q6g4C3tnD8gSCUcm2+50n8ZfDOs6l/wC7wiCYgE+v+BWGi7xMzvNiRl1WvMkrK73B6t80MFiC3VEzq7LNtkA5d88aYmD0KaTDmP/7Zmi6VUadfb4qposjq4m+FeqT89Gcg3qX5O9tVLyfFyh7tnc0HE9McCjxMAeHoVGWnmMY87dAZZUIVR3qD/Z3kEjA028OL/LH5A/6bfeS0ROPjv9lbfkhQbyGh4Dv/j2ezBfAA4deDFfTG+2mkPPXaeUaZ7Pq8DYmTWFBTF4wUSQjJrBF90uZ4AxaC0oO563fZgQ2d90pxK0o9uvEsVmxY4QWQ0PeHLdu6njl9jmxJA=
  distributions: sdist bdist_wheel
  skip_existing: true
