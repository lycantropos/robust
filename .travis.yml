dist: xenial

language: python

matrix:
  include:
    - python: pypy3.5-6.0.0
    - python: pypy3.6-7.0.0
    - python: 3.5
    - python: 3.6
    - python: 3.7
    - python: 3.8

install:
  - python -m pip install --upgrade pip setuptools
  - python -m pip install --upgrade codecov
  - python -m pip install --force-reinstall -r requirements.txt
  - python -m pip install --force-reinstall -r requirements-tests.txt

script:
  - pytest
  - python -m doctest README.md

after_success:
  - python -m codecov -f coverage.xml -X gcov

deploy:
  provider: pypi
  on:
    branch: master
    user: __token__
  password:
    secure: ANNNaz5F1p8v9dnSSOe+stLNizBeSby+OUsMFEmM16BbJbXdNxZw3R/izqH90I/Cn6aSwniCVIecM/oqiQZT7EVuYxJQHt7yzcbzkFiaG29AR/+RHUY8XOYLOSWKT9tbeRDg6BzAQHJPrJxmGab+LwgG3z1YeTyGpXMVu94EWpg8qW9hicf54dzdSZvqtba8tLVGhNy0CpUqDF70rNFsw3VPtEImDiqw57JnMrJJAD2k15aYly0OSOnhxEY1FoBkX4RT/tY53lOSgw33qHbsDj1Akz8LUnL0xeiWCdZ1UvUOuJJnHQp1mXromZ2FkHoo4GFMNdmNnjgdgJ/HRLwbn2yj153udU+9mrNzD9ZwvnaQkOXzV3JEk6SHzcFkSRRaQTiN+jqIzclDIF1GrolbIqW8trSgdlFAlewQwShL+uq8wlph3oEjXFE/Hsen2TqHysnQPyPY8YBE1uodZVdi4KAuBPy0Og6bTl05Fbxdr6XpNg/5DGekxgzeDwVx5IL16j+3KdgMUfCDAtsfselaPp4B6XUpL0yEVEC2cdOalFjLEK18zWgBkqMlqPmsVtv13dtq8WK/ywYqfTlUM8RCozaRv6CbJXrAA201FD5YiHomsyA3BtAsh3P7wx099y2Z0GH/s80dbibATi5OCGGXG9DZ2MaSzg5yNTHsfd52kNc=
  distributions: "sdist bdist_wheel"
